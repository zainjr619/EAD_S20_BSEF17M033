
@{
    ViewBag.Title = "Signup";
    Layout = "~/Views/Shared/_Assign4.cshtml";
}

<h2>Signup</h2>
@{
    <style>
        input[type=text], input[type=password] {
            width: 25%;
            padding: 5px;
            margin: 2px 0 2px 0;
            border: solid;
            background: #f1f1f1;
        }

        #btnSubmit {
            background-color: #4CAF50;
            color: white;
            padding: 16px 20px;
            margin: 8px 0;
            border: none;
        }

        div {
            border-radius: 5px;
            background-color: #f2f2f2;
            padding: 20px;
        }
    </style>
    <br />
    <b>Name:<br /><input type="text" name="txtUserName" id="name" /></b>
    <br />
    <b>Login:<br /><input type="text" name="txtUserLogin" id="lname" /></b>
    <br />
    <b>Password:<br /><input type="password" name="txtPassword" id="upass" /></b>
    <br />


    <input type="button" value="Signup" id="btnSubmit">
    <span id="login-error" style="color:red">@ViewData["CredentialErrors"]</span>

    <script>
         $(document).ready(function () {
             $("#btnSubmit").on("click", function () {
                 if ($("#name").val().trim() === "" || $("#lname").val().trim() === "" ||
                     $("#upass").val().trim() === "") {

                     alert("please enter username and password");
                     return false;
                 }
             });

         });
         var l, p,n;
         $(document).ready(function () {
             $("#btnSubmit").click(function () {
                 l = $("#lname").val();
                 p = $("#upass").val();
                 n = $("#name").val();
                 let obj1 = { "Login": l, "password": p,"name":n };
                 console.log(obj1);
                 var ajaxcall = {
                     type: "POST",

                     url: 'https://localhost:44358/api/Login/UserSave',
                     data: obj1,
                     success: successFun,
                     error: OnError
                 }
                 $.ajax(ajaxcall);
             });
             function successFun(res) {
                 if (res == "success") {
                     window.location.href = '@Url.Content("~/Login/Home")';
                 }
                 else {
                     alert("invalid");
                 }
             }
             function OnError(res) {

                 //console.log(res);
             }
         });


    </script>

}

